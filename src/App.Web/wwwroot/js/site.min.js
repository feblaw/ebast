function initPlUploadWidget(n,t,i,r,u,f){return $(n).pluploadQueue({runtimes:"html5,html4",url:t,max_file_size:"5mb",filters:[{title:"All files",extensions:"*"}],rename:!0,sortable:!0,dragdrop:!0,multiple_queues:!0,views:{list:!0,active:"list"},init:{PostInit:function(){$(n).find(".plupload_header").hide();$(n).find(".plupload_content").css("top",0);$(n).find(".plupload_content").css("bottom",0);$(n).find(".plupload_filelist_footer").css("position","static");$(n).find(".plupload_container").prop("title","");f&&f(n)},FileUploaded:function(n,t,f){var o=JSON.parse(f.response),e=$(i).html(),s;e=e.replace(/{{name}}/ig,o.data.name);e=e.replace(/{{size}}/ig,o.data.size);e=e.replace(/{{path}}/ig,o.data.path);$(r).find(".no-attachment").length===0?$(r).append(e):$(r).html(e);s=$(u).val()+o.data.path+"|";$(u).val(s)}}})}function removeAttachment(n,t,i,r){var f=$(n).data("to-delete"),u=$(i).val();u=u.replace($(n).data("to-delete")+"|","");$(i).val(u);r!==undefined&&r!==null?$.ajax({url:r,success:function(){afterRemoveAttachment(n,t,i)}}):afterRemoveAttachment(n,t,i)}function afterRemoveAttachment(n,t,i){$(n).parent().remove();$(i).val()===""&&$(t).html(noAttachment)}function extractFilename(n){var t=n.lastIndexOf("/"),i;return t===-1&&(t=0),i=n.indexOf("_",t),i===-1?n:n.slice(i+1)}function renderExistingFiles(n,t,r,u,f,e){var a,s,h,l;if(u===!0){var v=$(n).val(),o=v.split("|"),c="";if(o[0]=="")c=noAttachment;else for(i=0;i<o.length;i++)typeof o[i]=="string"&&o[i]!==""&&(a=extractFilename(o[i]),s='<div class="btn-group " style="margin-right:5px;">',s+='<a target="_blank" class="btn btn-sm btn-success" href="'+r+sanitizeHref(o[i])+'"><i class="fa fa-paperclip"><\/i> '+a+"<\/a>",s+='<a class="btn btn-sm btn-success delete-upload" data-to-delete="'+sanitizeHref(o[i])+'" href="javascript:void(0)"><i class="fa fa-times"><\/i><\/a>',s+="<\/div>",c+=s);$(t).html(c)}else if(f!==undefined&&f!==null&&f!=="")$(t).each(function(){var n=$(this).find(f).text();$(this).find(f).text(extractFilename(n));$(this).find("a").prop("href",$(this).find("a").prop("href")+sanitizeHref(n))});else{if(e!==undefined&&e!==null&&typeof e=="string"){if(h=JSON.parse(e),h.length===0)return noAttachmentDt;for(l="<ul style='list-style-type:none; padding:0;'>",i=0;i<h.length;i++)l+="<li><a href="+r+sanitizeHref(h[i])+"><i class='fa fa-paperclip'><\/i> "+extractFilename(h[i])+"<\/a><\/li>";return l+"<ul>"}return noAttachmentDt}}function sanitizeHref(n){var i,r,t;if(typeof n!="string"||n==null)return"#";for(i=n.split("/"),r=[],t=0;t<i.length;t++)r.push(encodeURIComponent(i[t]));return r.join("/")}function disableImmediateSearchDt(n,t,i,r){var u=$(r+"_wrapper .dataTables_filter input");u.off();u.on("keyup",function(n){n.keyCode==13&&$(r).DataTable().search(this.value).draw()})}var theDataTable=null,noAttachment='<p class="form-control-static"><a class="no-attachment" href="#">No Attachment<\/a><\/p>',noAttachmentDt="<strong>No Attachment<\/strong>";